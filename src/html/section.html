<style>
    .custom-field{
        width: 200px; float:left; margin: 5px;
    }
</style>
<div class="custom-fields">

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" crossorigin="anonymous"></script>
<script>
    $( document ).ready(function(){
        var cardid = getUrlParameter('cardid');
        var key = getUrlParameter('key');
        var token = getUrlParameter('token');
        $.ajax({
            url: 'https://api.trello.com/1/cards/' + cardid + '/pluginData?key=' + key + '&token=' + token,
            success: function(e) {
                var result = JSON.parse(e[0].value);

                $.each(result, function(i, customfields){    
                    $.each(customfields, function(j, customfield){  
                        var html = '';
                          
                        if(customfield.name != null) {
                            html += '<div class="custom-field">';
                            html += '<label>' + customfield.name + '</label><br/>';
                            html += '<span class="detail-badge-value" id="sp' + customfield.id + '">noch nicht definiert</span>';
                            switch(customfield.type) {
                                case "list":
                                    html += "<select style='width: 100%' id=cus'" + customfield.id + "'>";
                                    $.each(customfield.options, function(j, option){
                                        html += '<option value="' + option.id + '">' + option.value + '</option>';
                                    });
                                    html += "</select>";
                                    break;
                                case "check":
                                    html += "<input id='cus" + customfield.id + "' type='checkbox' checked='" + (customfield.options != null && customfield.options.length > 0 ? customfield.options[0].value : "false") + "'/>";
                                    break;
                                default:
                                    html += "<input id='cus" + customfield.id + "' type='text' value='" + (customfield.options != null && customfield.options.length > 0 ? customfield.options[0].value : "") + "'/>";
                                    break;
                            }
                            html += '</div>';

                            $('.custom-fields').append(html);

                            $('#' + customfield.id).on('change', function(){
                                var value = $(this).val();
                                var id =  $(this).attr("id");
                                var text = $(this).children('option:selected').text();

                                console.log(value + '-' + id);
                                $('#sp' + id).text(text);
                            });
                        }    
                    });
                    
                    
                });

            }
        })
    });

    var getUrlParameter = function getUrlParameter(sParam) {
        var sPageURL = window.location.search.substring(1),
            sURLVariables = sPageURL.split('&'),
            sParameterName,
            i;

        for (i = 0; i < sURLVariables.length; i++) {
            sParameterName = sURLVariables[i].split('=');

            if (sParameterName[0] === sParam) {
                return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
            }
        }
    };
</script>